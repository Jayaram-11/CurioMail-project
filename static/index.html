<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CurioMail - Spark Your Curiosity</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts for professional typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* Custom styles for the application */
        body {
            background-color: #FFF8E7;
            font-family: 'Inter', sans-serif;
            color: #333; /* Using a dark grey for better readability than pure black */
        }
        /* Custom font for the brand name */
        .font-poppins {
            font-family: 'Poppins', sans-serif;
        }
        /* Simple transition for page visibility */
        .page {
            transition: opacity 0.3s ease-in-out;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header Section -->
    <header class="bg-[#4A90E2] shadow-md">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Brand/Logo linking to Home -->
            <a href="#home" id="brand-link" class="text-white text-3xl font-poppins font-semibold tracking-wide">CurioMail</a>
            <!-- Navigation Link to Suggestions Page -->
            <a href="#suggestions" id="suggestions-nav-link" class="text-white text-lg font-medium hover:text-gray-200 transition-colors">Suggestion</a>
        </nav>
    </header>

    <!-- Main Content Area -->
    <main class="container mx-auto px-6 py-12 md:py-20">

        <!-- Home Page Section -->
        <section id="home-page" class="page">
            <div class="text-center max-w-2xl mx-auto">
                <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">Spark Your Curiosity. One Email at a Time.</h2>
                <p class="text-lg text-gray-600 mb-10">
                    Get a daily dose of thought-provoking ideas, questions, and insights delivered straight to your inbox. Spend just 2-5 minutes a day and see the world differently.
                </p>

                <!-- Email Subscription Form Container -->
                <div id="email-form-container" class="max-w-md mx-auto mb-16">
                    <form id="email-form" class="flex flex-col sm:flex-row gap-3">
                        <input id="email-input" type="email" placeholder="Enter your email" class="flex-grow w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#4A90E2] transition" required>
                        <button type="submit" class="bg-[#4A90E2] text-white font-bold px-6 py-3 rounded-full hover:bg-[#357ABD] transition-colors shadow-lg whitespace-nowrap">
                            I'm In!
                        </button>
                    </form>
                </div>
                
                <!-- Success Message -->
                <div id="success-message" class="max-w-md mx-auto mb-16 hidden">
                    <p class="text-lg text-green-800 bg-green-100 border border-green-200 rounded-lg p-4">You’re in! A fresh dose of curiosity will hit your inbox tomorrow morning. Stay curious!</p>
                </div>

                <p class="text-md text-gray-700">
                    Have an idea? <a href="#suggestions" id="suggest-here-link" class="text-[#4A90E2] font-semibold hover:underline">Suggest here.</a>
                </p>
            </div>
        </section>

        <!-- Suggestions Page Section (Initially Hidden) -->
        <section id="suggestions-page" class="page hidden opacity-0">
            <div class="text-center max-w-2xl mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">Your Ideas, Our Next Spark.</h2>
                <p class="text-lg text-gray-600 mb-8">
                    Got an idea, question, or topic you’d love to see featured? Share it with us! Your curiosity can inspire thousands.
                </p>
                
                <!-- Suggestion Form -->
                <form id="suggestion-form" class="w-full">
                    <div id="suggestion-form-content">
                        <textarea id="suggestion-box" maxlength="300" placeholder="Have an idea or feedback? Share it..." class="w-full h-40 p-4 rounded-lg border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#4A90E2] transition resize-none"></textarea>
                        <div id="char-counter" class="text-right text-sm text-gray-500 mt-2">0 / 300</div>
                        <button type="submit" class="mt-6 bg-[#4A90E2] text-white font-bold px-8 py-3 rounded-full hover:bg-[#357ABD] transition-colors shadow-lg">
                            Spark It!
                        </button>
                        <p id="suggestion-error" class="text-red-500 mt-4 hidden">Oops! Your idea box is empty. Share your curiosity!</p>
                    </div>
                     <!-- Success Message -->
                    <div id="suggestion-success" class="hidden">
                         <p class="text-lg text-green-800 bg-green-100 border border-green-200 rounded-lg p-4">Thanks for your time. We'll look into it.</p>
                    </div>
                </form>
            </div>
        </section>

    </main>

    <script>
        // --- Backend server URL ---
        const API_URL = 'https://curiomail.onrender.com'; 

        // --- DOM Element Selection ---
        const homePage = document.getElementById('home-page');
        const suggestionsPage = document.getElementById('suggestions-page');
        const brandLink = document.getElementById('brand-link');
        const suggestionsNavLink = document.getElementById('suggestions-nav-link');
        const suggestHereLink = document.getElementById('suggest-here-link');
        
        const emailFormContainer = document.getElementById('email-form-container');
        const emailForm = document.getElementById('email-form');
        const emailInput = document.getElementById('email-input');
        const successMessage = document.getElementById('success-message');

        const suggestionForm = document.getElementById('suggestion-form');
        const suggestionFormContent = document.getElementById('suggestion-form-content');
        const suggestionBox = document.getElementById('suggestion-box');
        const charCounter = document.getElementById('char-counter');
        const suggestionError = document.getElementById('suggestion-error');
        const suggestionSuccess = document.getElementById('suggestion-success');

        // --- Page Navigation Logic (No changes here) ---
        const switchPage = (pageToShow) => {
            homePage.classList.add('opacity-0');
            suggestionsPage.classList.add('opacity-0');
            setTimeout(() => {
                homePage.classList.add('hidden');
                suggestionsPage.classList.add('hidden');
                if (pageToShow === 'home') {
                    homePage.classList.remove('hidden');
                    setTimeout(() => homePage.classList.remove('opacity-0'), 50);
                } else if (pageToShow === 'suggestions') {
                    suggestionsPage.classList.remove('hidden');
                    setTimeout(() => suggestionsPage.classList.remove('opacity-0'), 50);
                }
            }, 300);
        };
        brandLink.addEventListener('click', (e) => { e.preventDefault(); window.location.hash = 'home'; switchPage('home'); });
        suggestionsNavLink.addEventListener('click', (e) => { e.preventDefault(); window.location.hash = 'suggestions'; switchPage('suggestions'); });
        suggestHereLink.addEventListener('click', (e) => { e.preventDefault(); window.location.hash = 'suggestions'; switchPage('suggestions'); });
        window.addEventListener('DOMContentLoaded', () => {
            const hash = window.location.hash;
            if (hash === '#suggestions') { switchPage('suggestions'); } 
            else { homePage.classList.remove('hidden', 'opacity-0'); suggestionsPage.classList.add('hidden', 'opacity-0'); }
        });

        // --- Homepage Email Form Submission (MODIFIED FOR BACKEND) ---
        emailForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const userEmail = emailInput.value;

            try {
                const response = await fetch(`${API_URL}/subscribe`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email: userEmail })
                });

                if (response.ok) {
                    emailFormContainer.classList.add('hidden');
                    successMessage.classList.remove('hidden');
                } else {
                    alert('Something went wrong. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Could not connect to the server. Please try again later.');
            }
        });

        // --- Character Counter Logic (No changes here) ---
        suggestionBox.addEventListener('input', () => {
            const currentLength = suggestionBox.value.length;
            const maxLength = 300;
            charCounter.textContent = `${currentLength} / ${maxLength}`;
            if (currentLength >= maxLength) { charCounter.classList.add('text-red-500'); } 
            else { charCounter.classList.remove('text-red-500'); }
        });

        // --- Suggestion Form Validation (MODIFIED FOR BACKEND) ---
        suggestionForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const suggestionText = suggestionBox.value.trim();

            if (suggestionText === '') {
                suggestionError.classList.remove('hidden');
            } else {
                suggestionError.classList.add('hidden');
                try {
                    const response = await fetch(`${API_URL}/suggest`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ suggestion: suggestionText })
                    });
                    
                    if (response.ok) {
                        suggestionFormContent.classList.add('hidden');
                        suggestionSuccess.classList.remove('hidden');
                    } else {
                        alert('Something went wrong submitting your suggestion.');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('Could not connect to the server. Please try again later.');
                }
            }
        });
    </script>
</body>
</html>

